<div class="wrapper box-white">
    <h1>Notificacion</h1>

    <div class="row mt-1 g-3" *ngIf="notification">
        <form class="example-form">
            <div class="col-sm-12">
                <mat-form-field class="input-full-width" appearance="fill">
                    <mat-label>Titulo</mat-label>
                    <input
                        matInput
                        name="name"
                        [(ngModel)]="notification.title"
                        placeholder="Introduce el titulo"
                    />
                </mat-form-field>

                <mat-form-field class="input-full-width" appearance="fill">
                    <mat-label>Titulo Boton</mat-label>
                    <input
                        matInput
                        name="name"
                        [(ngModel)]="titleButton"
                        placeholder="Introduce el titulo del boton"
                    />
                </mat-form-field>

                <mat-form-field class="input-full-width" appearance="fill">
                    <mat-label>Â¿A quien?</mat-label>
                    <mat-select [(value)]="allOrUser" placeholder="Selecciona">
                        <mat-option>None</mat-option>
                        <mat-option value="all">Todos</mat-option>
                        <mat-option value="user">Usuario</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field
                    *ngIf="allOrUser === 'user' && users.length > 0"
                    class="input-full-width"
                    appearance="fill"
                >
                    <mat-label>Elige usuario</mat-label>
                    <mat-select
                        [(value)]="userSelected"
                        placeholder="Selecciona"
                    >
                        <mat-option *ngFor="let user of users" [value]="user"
                            >{{ user.name }} ({{ user._id }})
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field class="input-full-width" appearance="fill">
                    <mat-label>Enlace</mat-label>
                    <mat-select [(value)]="linkState" placeholder="Selecciona">
                        <mat-option [value]="true">Si</mat-option>
                        <mat-option [value]="false">No</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field
                    *ngIf="linkState"
                    class="input-full-width"
                    appearance="fill"
                >
                    <mat-select [(value)]="linkType">
                        <mat-option>None</mat-option>
                        <mat-option value="internal">Interno</mat-option>
                        <mat-option value="external">Externo</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field
                    *ngIf="linkState"
                    class="input-full-width"
                    appearance="fill"
                >
                    <mat-label>Url o Ruta</mat-label>
                    <input
                        matInput
                        name="name"
                        [(ngModel)]="link"
                        placeholder="Introduce el enlace"
                    />
                </mat-form-field>
            </div>

            <div class="col-sm-12">
                <mat-form-field class="input-full-width" appearance="fill">
                    <textarea
                        matInput
                        name="name"
                        rows="3"
                        [(ngModel)]="notification.message"
                        placeholder="Introduce el texto de la notificacion"
                        required
                    ></textarea>
                </mat-form-field>
            </div>

            <button
                [disabled]="submitDisabled"
                matButton
                class="w-100 btn btn-primary btn-sm"
                (click)="setAndSubmit()"
            >
                Enviar notificacion
            </button>
        </form>
    </div>
</div>
